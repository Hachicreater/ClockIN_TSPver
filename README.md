GTA5RPサーバー向けに制作された、勤務時間を記録・集計できるシンプルなDiscord BOTです。<br/>
出退勤の記録から給与の計算、管理者向けの操作パネルまで、最低限かつ実用的な機能に絞って構成されています。

---

# 背景・制作経緯

GTA5RPサーバーで従業員の勤務時間を計算し、給与を渡すという運用方法の一環として、<br/>
当初は ClockIN（https://clockin.xyz/）という有名なBOTを利用していました。
しかし、ClockINは非常に多機能である反面、セットアップが煩雑で、英語が読めない私にはハードルが高く、運用に苦戦しました。<br/>
1回セットアップしてしまえばあとは簡単ですが、BOTが英語なので、「いっそのこと自分で作ってしまおう」と考え、本BOTを一から開発しました。<br/>
あくまで私が所属しているGTA5RPサーバー向けに調整された設計のため、他サーバーや異なる運用方針では使い勝手に差がある可能性があります。

---

# 必要環境

- Node.js v18以降推奨
- Discord BOT トークン（Discord Developer Portalから取得）

---

# 使用パッケージ

以下の2つのみを使用しています。
```
npm install discord.js sqlite3
```
| パッケージ名 | 概要 |
| ------------- | ------------- |
| discord.js |  Discord API を操作するライブラリ| 
| sqlite3 | 出勤記録などを保存するための軽量DB| 

---

# config.json について
セキュリティ的には .env による環境変数管理が望ましいですが、<br/>
私はクローズドサーバーでの運用であるため、あえて config.json を採用しています。

編集例：
```
{
  "token": "YOUR_BOT_TOKEN",
  "clientId": "YOUR_CLIENT_ID"
}
```
BOTを起動する前にこのファイルを作成・編集してください。

---

# 起動方法
```
node ClockIN.js
```

---

# コマンド更新方法
スラッシュコマンドを編集・追加した場合は、以下のコマンドでDiscordに再登録してください。
```
node deploy-commands.js
```

---

# BOTコマンド一覧

| コマンド | 説明 |
| ------------- | ------------- |
| /setchannel <チェンネル明> | BOTの動作ログ等を発信するチャンネルの指定 |
| /setrole add <@ロール名> | 管理者権限を持つロールを追加（複数登録可） |
| /setrole delete <@ロール名> | 管理者権限を持つロールを削除 |
| /setrole list | 管理者権限を持つロールを一覧表示 |
| /setworktime <開始時間> <終了時間> | 出勤可能時間を設定 |
| /settimecard | 出勤退勤ボタンの設置 |
| /setadminpanel | 出勤時間の調整、集計、リセットを行うボタンの設置 |
| /setalerttime <通知時間> | 出勤可能時間を過ぎても出勤中のユーザーがいたときに告知 |

※すべてのコマンドは /setrole で指定されたロール、またはDiscord上の管理者権限を持つユーザーのみ使用可能です。

---

# 注意点

データベースは clockin.db としてローカルに保存されます。<br/>
dbとは別に一部補助的なログやファイルが保存されることがあります。

---

# ライセンス

MIT Licenseご自由にご利用・改変ください。<br/>
再配布・再公開時はREADMEやLICENSEの明記を推奨します。

